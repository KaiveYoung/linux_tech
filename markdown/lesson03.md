# 文件系统与目录结构

深入了解Linux文件系统的组织结构和目录层次

---

## 什么是文件系统？

- 操作系统用来管理文件和目录的机制
- 定义了文件和目录的存储方式
- 提供文件和目录的访问接口
- Linux支持多种文件系统类型

---

## Linux文件系统特点

### 树状结构
- 所有文件和目录都从根目录（/）开始
- 形成倒置的树状结构
- 每个目录都可以包含子目录和文件

### 统一接口
- 所有设备都作为文件处理
- 提供统一的访问接口
- 支持虚拟文件系统（VFS）

---

## 根目录结构

```
/
├── bin/          # 基本命令程序
├── boot/         # 启动文件
├── dev/          # 设备文件
├── etc/          # 系统配置文件
├── home/         # 用户主目录
├── lib/          # 系统库文件
├── media/        # 可移动媒体挂载点
├── mnt/          # 临时挂载点
├── opt/          # 可选软件包
├── proc/         # 进程信息
├── root/         # root用户主目录
├── run/          # 运行时数据
├── sbin/         # 系统管理命令
├── srv/          # 服务数据
├── sys/          # 系统信息
├── tmp/          # 临时文件
├── usr/          # 用户程序
└── var/          # 可变数据
```

---

## 重要目录详解

### /bin 和 /sbin
- `/bin`: 基本命令，所有用户可用
- `/sbin`: 系统管理命令，通常需要root权限
- 包含系统启动和运行必需的命令

### /usr
- 用户程序和数据
- `/usr/bin`: 用户命令
- `/usr/sbin`: 系统管理命令
- `/usr/lib`: 库文件
- `/usr/share`: 共享数据

---

## 用户相关目录

### /home
- 普通用户的主目录
- 每个用户有独立的子目录
- 用户对自己的主目录有完全控制权

### /root
- root用户的主目录
- 系统管理员的工作目录
- 具有最高权限

---

## 系统配置目录

### /etc
- 系统配置文件
- 网络配置、用户配置、服务配置
- 大部分配置文件都是文本文件

### 重要配置文件
```bash
/etc/passwd      # 用户账户信息
/etc/shadow      # 用户密码信息
/etc/group       # 用户组信息
/etc/hosts       # 主机名解析
/etc/fstab       # 文件系统挂载表
```

---

## 运行时目录

### /proc
- 虚拟文件系统
- 提供内核和进程信息
- 实时反映系统状态

### /sys
- 虚拟文件系统
- 提供硬件设备信息
- 用于设备驱动管理

### /run
- 运行时数据
- 进程ID文件、套接字文件
- 系统重启后清空

---

## 临时和可变数据

### /tmp
- 临时文件目录
- 所有用户可写
- 系统重启后清空

### /var
- 可变数据目录
- 日志文件、缓存、数据库
- 系统运行过程中变化的数据

---

## 挂载点

### /media
- 可移动媒体挂载点
- USB设备、CD/DVD
- 自动挂载的默认位置

### /mnt
- 临时挂载点
- 手动挂载文件系统
- 临时访问其他文件系统

---

## 路径概念

### 绝对路径
- 从根目录开始的完整路径
- 以 `/` 开头
- 示例：`/home/user/documents/file.txt`

### 相对路径
- 相对于当前目录的路径
- 不以 `/` 开头
- 示例：`documents/file.txt`

---

## 特殊目录符号

### 当前和上级目录
- `.` - 当前目录
- `..` - 上级目录
- 可以组合使用：`../..` 表示上两级目录

### 用户主目录
- `~` - 当前用户主目录
- `~username` - 指定用户的主目录

---

## 文件系统类型

### 常见文件系统
- **ext4**: Linux默认文件系统
- **XFS**: 高性能文件系统
- **Btrfs**: 现代文件系统，支持快照
- **NTFS**: Windows文件系统
- **FAT32**: 通用文件系统

### 查看文件系统
```bash
df -T          # 查看已挂载文件系统类型
mount          # 查看挂载信息
lsblk          # 查看块设备信息
```

---

## 挂载和卸载

### 挂载文件系统
```bash
mount /dev/sdb1 /mnt/usb    # 挂载USB设备
mount -t ntfs /dev/sdb1 /mnt/ntfs    # 指定文件系统类型
```

### 卸载文件系统
```bash
umount /mnt/usb             # 卸载设备
umount /dev/sdb1            # 通过设备名卸载
```

---

## 磁盘空间管理

### 查看磁盘使用情况
```bash
df -h          # 查看文件系统使用情况
du -h          # 查看目录使用情况
du -sh *       # 查看当前目录各子目录大小
```

### 查找大文件
```bash
find / -size +100M -type f    # 查找大于100MB的文件
du -h | sort -hr | head -10   # 查看最大的10个目录
```

---

## 本课小结

- 理解了Linux文件系统的树状结构
- 掌握了重要目录的作用和用途
- 学会了绝对路径和相对路径的使用
- 了解了文件系统的挂载和卸载
- 掌握了磁盘空间管理的基本方法

**下节课预告：** 文件操作命令

---

## 课后练习

1. 浏览根目录结构，了解各目录内容
2. 练习使用绝对路径和相对路径
3. 查看系统配置文件
4. 练习挂载和卸载操作
5. 使用命令查看磁盘使用情况
